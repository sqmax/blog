---
layout: post
title: "JavaWeb基础（零）-HTTP协议(上)"
date: 2018-02-14 21:05
categories: JavaWeb基础
tags: HTTP
---
* content
{:toc}
为了解HTTP，我们有必要先了解一下TCP/IP协议，因为HTTP是TCP/IP协议族的一个子集。




## TCP/IP的分层管理
TCP/IP协议族里重要的一点就是分层，TCP/IP协议族按层次分为一下4层：应用层、传输层、网络层和数据链路层。把TCP/IP层次化是有好处的，比如，如果互联网只有一个协议统筹，某个地方需要改变设计时，就必须把所有部分整体替换掉。而分层之后只需把变动的层替换掉即可，把各层之间的接口部分规划好之后，每个层次内部的设计就能够自由改动了。而且层次化之后，设计也变得相对简单了。处于应用层上的应用可以只考虑分派给自己的任务，而不需要弄清对方在地球上那个地方、对方的传输线路是怎样的、是否能够确保传输送达等问题。
![](http://wx4.sinaimg.cn/large/0072Njp2ly1foh0v24rkmj30dw0cat8x.jpg)
* 应用层
应用层决定了向用户提供应用服务时通信的活动。TCP/IP协议族内预存了各类通用的应用服务。比如，FTP（File Transfer Protocol)和DNS（Domain Name System)服务就是其中两类。HTTP协议也处于该层。
* 传输层
传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。在传输层有两个性质不同的协议：TCP（Transmission Control Protocol)和UDP（User Data Protocol）。
* 网络层
网络层用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。该层规定了通过怎样的（传输路线）到达对方计算机，并把数据包传送给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项内选择一条传输线路。
* 链路层
用来处理连接网络的硬件部分。包括控制操作系统、硬件的设备驱动、NIC(Network Interface Card,网络适配器，即网卡)，及光纤等物理可见部分。硬件上的范畴都在链路层的作用范围之内。

## TCP/IP通道传输流

![]()
利用TCP/IP协议族进行网络通信时，会通过分层顺序对对方进行通信。发送端从应用层往下走，接收方则向应用层往上走。发送端在层与层之间传输数据时，每经过一层时必定会被打上一个该层所属的首部信息。反之，接收端在层与层传输数据时，每经过一层时会把对应的首部消去。这种把数据信息包装起来的做法称为封装。

## 与HTTP关系密切的协议：IP、TCP和DNS

### 负责传输的IP协议
按层次分，IP协议（不要把IP地址和IP搞混，IP是一种协议的名称）位于网络层。**IP协议的作用使用是把各种数据包传送给对方**。而要保证确实传送到对方那里，则需要满足各类条件。其中最重要的两个条件就是IP地址和MAC地址（Media Access Control Address）。IP地址指明了节点被分配到的地址，MAC地址是指网卡所属的固定地址，IP地址可以和MAC地址进行配对。IP地址可变换，但MAC地址基本上不会改变。

> 使用ARP协议凭借MAC地址进行通信
> IP间的通信依赖MAC地址。在网络上。通信的双方在同一局域网内的情况很少，通常是经过多台计算机和网络设备> 中转才能连接对方。而在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这是，会采用?> ARP协议（Address Resolution Protocol）。ARP是一种用于解析地址的协议，根据通信方的IP地址就可以反查出对应的MAC地址。
![]()

### 确保可靠性的TCP协议
按层次分，TCP位于传输层，提供了可靠的字节流服务。所谓的字节流服务（Byte Stream Service）,是指为了方便传输，将大块数据分割成以报文段为单位的数据包进行管理。而可靠的传输服务是指，能够把数据准确可靠地传送给对方。总之，TCP协议为了更容易传送大数据才把数据分割，而且TCP协议能够确认数据最终是否送达到对方。
![](http://wx1.sinaimg.cn/large/0072Njp2ly1foh0v5cctnj30f00a874c.jpg)
>**为了准确无误地将数据送达目标处，TCP协议采用了三次握手策略**。握手过程中使用了TCP的标志-SYN(synchronize)和ACK(acknowledgement)。
1. 发送方首先发送一个带SYN标志的数据包给对方。
2. 接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认消息。
3. 最后，发送端再回传一个带ACK标志的数据包，代表”握手“结束。

### 负责域名解析的DNS服务
DNS服务是和HTTP协议一样位于应用层的协议。它提供域名到IP地址之间的解析服务。用户通常使用主机名或域名来访问对方的计算机，而不是直接通过IP地址访问，因为与IP地址的一组纯数字相比，用字母配合数字的表示形式来指定计算机名更符合人类的记忆习惯;但要让计算机去理解名称，相对而言就变得困难了，因为计算机更擅长处理一长串数字。为了解决上述问题，DNS服务应运而生了。**DNS协议提供通过域名查找IP地址，或逆向从IP地址反查域名的服务**。






